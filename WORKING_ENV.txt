# على السيرفر نفذ:

cd /root/55

cat > .env << 'ENVEOF'
DATABASE_URL="postgresql://postgres.jxtutquvxmkrajfvdbab:2cUQcWvZf9qJ2nt6@aws-0-us-west-1.pooler.supabase.com:5432/postgres"
SUPABASE_URL="https://jxtutquvxmkrajfvdbab.supabase.co"
SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4dHV0cXV2eG1rcmFqZnZkYmFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE0NDA5MjcsImV4cCI6MjA3NzAxNjkyN30.jLMQWJqwj6Amja-bsBmLwZjmTHgusL_1q2n_ZThbRrM"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4dHV0cXV2eG1rcmFqZnZkYmFiIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTQ0MDkyNywiZXhwIjoyMDc3MDE2OTI3fQ.kWtyqG9Rz7Z_Cf2hBhgjW5eMwPgC6YLJzZQH1gW8D7o"
JWT_SECRET="promohive-super-secret-jwt-key-2024"
JWT_REFRESH_SECRET="promohive-super-secret-refresh-key-2024"
ACCESS_TOKEN_EXPIRES_IN="15m"
REFRESH_TOKEN_EXPIRES_IN="7d"
PORT=3002
NODE_ENV="production"
CORS_ORIGIN="https://globalpromonetwork.store"
PLATFORM_URL="https://globalpromonetwork.store"
HOST="0.0.0.0"
RATE_LIMIT_WINDOW_MS="900000"
RATE_LIMIT_MAX_REQUESTS="100"
SMTP_HOST="smtp.hostinger.com"
SMTP_PORT="465"
SMTP_SECURE="true"
SMTP_USER="promohive@globalpromonetwork.store"
SMTP_PASS="PromoHive@2025!"
SMTP_FROM="promohive@globalpromonetwork.store"
ADGEM_JWT_SECRET="your-adgem-jwt-secret"
ADSTERRA_API_KEY="your-adsterra-api-key"
CPALEAD_API_KEY="your-cpalead-api-key"
LOG_LEVEL="info"
BCRYPT_SALT_ROUNDS="12"
ENVEOF

echo "✅ Created .env with correct password"
echo ""

echo "Testing connection..."
npx prisma db pull --schema prisma/schema.prisma 2>&1 | head -10

echo ""
echo "Building..."
npm run build

echo ""
echo "Restarting..."
pm2 restart promohive

echo ""
echo "Status..."
sleep 3
pm2 logs promohive --lines 15 | grep -E "Database|Connected|FATAL|Authentication|error|🚀"

echo ""
echo "✅ Visit: https://globalpromonetwork.store/admin"

